version: "3.8"
services:
  thingsboard:
    image: ${TB_IMAGE}
    container_name: ${TB_CONTAINER_NAME}
    restart: always
    ports:
      - "${TB_WEB_PORT}:8080"                          # ThingsBoard Web UI
      - "${TB_MQTT_PORT}:1883"                         # TB MQTT endpoint (Mosquitto can stay on 1883)
      - "${TB_COAP_PORT_RANGE}:5683-5688/udp"         # Optional CoAP/LwM2M ports
    environment:
      TB_QUEUE_TYPE: ${TB_QUEUE_TYPE}
      LOAD_DEMO: "${TB_LOAD_DEMO}"
    volumes:
      - tb-data:/data
      - tb-logs:/var/log/thingsboard

volumes:
  tb-data:
  tb-logs:
